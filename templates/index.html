{% extends "base.html" %}
{% block title %}Accueil{% endblock %}
{% block content %}
<div class="panel" style="max-width:720px;margin:24px auto">
    <h2>Créer une classe</h2>

    {% with msgs = get_flashed_messages(with_categories=true) %}
    {% if msgs %}
    <ul style="padding:0;list-style:none;margin:0 0 12px 0">
        {% for cat, msg in msgs %}
        <li class="flash {{cat}}">{{ msg }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}

    <form method="post" action="{{ url_for('main.ajouter_classe') }}">
        <div class="field">
            <label for="annee_debut">Année scolaire (début)</label>
            <input id="annee_debut" name="annee_debut" type="number" min="2000" max="2100" required placeholder="2024">
            <div class="hint">Ex.: 2024 → créera “2024-2025”.</div>
        </div>

        <div class="field">
            <label>Niveaux</label>
            <div style="display:flex;flex-wrap:wrap;gap:8px">
                {% for n in ['CP','CE1','CE2','CM1','CM2'] %}
                <label
                    style="display:inline-flex;gap:6px;align-items:center;border:1px solid #e5e7eb;padding:6px 10px;border-radius:8px">
                    <input type="checkbox" name="niveau" value="{{ n }}"> {{ n }}
                </label>
                {% endfor %}
            </div>
        </div>

        <button type="submit" class="btn">Créer</button>
    </form>

    {% if classes and classes|length %}
    <hr class="divider">
    <h3>Classes existantes</h3>
    <ul>
        {% for c in classes %}
        <li>
            <a href="{{ url_for('main.page_classe', classe_id=c.id) }}">
                {{ c.niveaux | format_niveaux }} — {{ c.annee | format_annee }}
            </a>
        </li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endblock %}