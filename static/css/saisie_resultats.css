/* ========== TABLEAU DE BASE ========== */
.table-resultats {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    /* les TH fixent les largeurs */
}

.table-resultats thead th,
.table-resultats tbody td {
    border: 1px solid #ddd;
    padding: 6px;
    text-align: center;
    vertical-align: middle;
    box-sizing: border-box;
    /* évite que le padding gonfle la largeur */
}

/* ========== COLONNES (robustes avec :nth-of-type) ========== */
/* 1) Élève = 1ère colonne visuelle (large) */
.table-resultats thead th:first-of-type,
.table-resultats tbody td:first-of-type {
    width: 960px;
    /* ↔️ élargie (ajuste si besoin) */
    max-width: 960px;
    text-align: left;
}

.eleve-identite {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 960px;
    /* doit matcher la largeur de la col */
    text-align: left;
}

/* 2) Absent = 2e colonne (étroite, alignée à gauche) */
.table-resultats thead th:nth-of-type(2),
.table-resultats tbody td:nth-of-type(2) {
    width: 90px;
    /* ajuste si besoin */
    max-width: 90px;
    text-align: left;
    /* demandé */
    padding-left: 8px;
    padding-right: 8px;
}

/* normalise la checkbox pour qu’elle tienne dans 90px */
.table-resultats tbody td:nth-of-type(2) input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin: 0;
    /* pas de centrage forcé */
    transform: none;
    /* au cas où un scale traînait */
}

/* 3) Objectifs = colonnes 3 .. avant-dernière (toutes élargies) */
.table-resultats thead th:nth-of-type(n+3):not(:last-of-type),
.table-resultats tbody td:nth-of-type(n+3):not(:last-of-type) {
    width: 120px;
    /* ↔️ élargies (avant 56px). Mets 140px si tu veux encore + large */
    max-width: 120px;
}

/* 4) Moyenne = dernière colonne */
.table-resultats thead th:last-of-type,
.table-resultats tbody td:last-of-type {
    width: 220px;
    /* confortable pour “xx.x / 20” + pastille + disquette */
    max-width: 220px;
}

/* ========== EN-TÊTES OBJECTIFS PIVOTÉS ========== */
.rotate-90 {
    display: inline-block;
    transform: rotate(-90deg);
    transform-origin: left top;
    white-space: nowrap;
    line-height: 1;
    margin-top: 36px;
    /* augmente si ça touche */
}

/* ========== PASTILLES NA / PA / A ========== */
.note-pills {
    display: inline-flex;
    gap: 8px;
    /* un peu d’air entre pastilles */
    align-items: center;
    white-space: nowrap;
}

.note-pills.disabled {
    opacity: .5;
    pointer-events: none;
}

.pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 28px;
    border-radius: 999px;
    border: 1px solid rgba(0, 0, 0, .15);
    font-size: .84rem;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    background: #f6f6f6;
}

.pill:hover {
    filter: brightness(0.97);
}

.pill-na.selected {
    background: #ff000075;
    color: #000;
    border-color: #ff000075;
}

.pill-pa.selected {
    background: #ffe223;
    color: #000;
    border-color: #ffe223;
}

.pill-a.selected {
    background: #5cc995;
    color: #000;
    border-color: #5cc995;
}

/* ========== MOYENNE (texte + pastille + disquette) ========== */
.cell-moyenne .moyenne-wrap {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    white-space: nowrap;
}

.moyenne-note {
    min-width: 100px;
    /* “xx.x / 20” tient sans casser la ligne */
    text-align: right;
    display: inline-block;
}

.pill-moy {
    /* couleur posée via JS */
}

/* disquette à droite de la moyenne (invisible par défaut, sans déformer la ligne) */
.save-icon,
.save-icon-moy {
    display: none;
    width: 14px;
    height: 14px;
    margin-left: 6px;
    vertical-align: middle;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" \
viewBox="0 0 16 16" fill="%234a7cff"><path d="M1 3a2 2 0 0 1 2-2h8l4 4v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2zM3 2a1 1 0 0 0-1 1v10a1 \
1 0 0 0 1 1h1v-4a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v4h1a1 1 0 0 0 1-1V6.5L10.5 2zM6 14h4v-4H6zM4 4h6v3H4z"/></svg>') no-repeat center/contain;
    opacity: 0;
}

.save-icon-moy.show {
    display: inline-block;
    animation: saveFade 1s ease-in-out;
}

@keyframes saveFade {
    0% {
        opacity: .0;
    }

    10% {
        opacity: 1;
    }

    90% {
        opacity: 1;
    }

    100% {
        opacity: .0;
    }
}

/* ========== ABSENTS (effet visuel) ========== */
tr.ligne-eleve.absent {
    opacity: .55;
}